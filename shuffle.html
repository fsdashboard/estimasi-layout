<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Shuffle Pages</title>
  <script src="https://cdn.tailwindcss.com"></script>

<style>
  .modal-enter {
    opacity: 0;
    transform: scale(0.95);
    transition: opacity 0.3s ease, transform 0.3s ease;
  }

  .modal-show {
    opacity: 1;
    transform: scale(1);
  }

  .modal-hide {
    opacity: 0;
    transform: scale(0.95);
  }
</style>
</head>
<body class="bg-gray-100 text-gray-800">
  <div class="flex h-screen">
    <aside class="w-64 bg-gray-800 text-white flex flex-col">
      <div class="p-4 text-xl font-bold border-b border-gray-700">Estimasi Online</div>
      <nav class="flex-1 p-4 space-y-2 text-sm">
        <a href="index.html" class="block p-2 font-semibold rounded hover:bg-gray-700">🏠 Halaman Utama</a>
        <a href="layout-a3.html" class="block p-2 font-semibold rounded hover:bg-gray-700">📐 Layout A3+</a>
        <a href="buku/buku.html" class="block p-2 font-semibold rounded hover:bg-gray-700">📘 Buku</a>
        <a href="spanduk.html" class="block p-2 font-semibold rounded hover:bg-gray-700">🖼️ Spanduk</a>
        <a href="adjust-size.html" class="block p-2 font-semibold rounded hover:bg-gray-700">🔧 Adjust Size</a>
        <a href="shuffle.html" class="block p-2 font-semibold rounded hover:bg-gray-700">📄 Shuffle Pages</a>
        <a href="penawaran.html" class="block p-2 font-semibold rounded hover:bg-gray-700">💰 Penawaran</a>
        <a href="pengiriman.html" class="block p-2 font-semibold rounded hover:bg-gray-700">🚚 Pengiriman</a>
      </nav>
    </aside>
    <main class="flex-1 p-6 overflow-y-auto">
      <h1 class="text-2xl font-bold mb-4 text-blue-700">Shuffle Pages</h1>
      <p class="text-sm text-gray-600 mb-4">Tambahkan fitur pengurutan ulang halaman di sini</p>
      <div class="bg-white rounded-lg shadow p-6 w-fit mx-auto">
    <table class="mb-4">
      <tr>
        <td class="pr-2 py-3 block font-semibold">Jumlah Halaman</td>
        <td><input id="isiHalaman" type="number" class="ml-2 p-1 border rounded w-64" /></td>
    </tr>
    <tr>
      <td class="pr-2 py-3 block font-semibold">Posisi</td>
      <td>
        <select id="posisi" class="ml-2 p-1 border rounded w-64">
          <option>-- Auto --</option>
          <option>Portrait</option>
          <option>Landscape</option>
        </select>
      </td>
    </tr>
    <tr>
        <td class="pr-2 py-3 block font-semibold">Baris&nbsp;&nbsp;&nbsp;&nbsp;&#x2B07;</td>
        <td><input id="baris" type="number" class="ml-2 p-1 border rounded w-64" />
      </td>
    </tr>
    <tr>
        <td class="pr-2 py-3 block font-semibold">Kolom &#x27A1;</td>
        <td><input id="kolom" type="number" class="ml-2 p-1 border rounded w-64" />
      </td>
    </tr>
    <tr>
        <td class="pr-2 py-3 block font-semibold">Slide</td>
        <td><select id="slide" class="ml-2 p-1 border rounded w-64">
          <option>-- Sided --</option>
          <option>1 Sisi</option>
          <option>2 Sisi</option>
        </select>
      </tr>
   </table>

    <div class="flex items-center gap-4 mb-4">
      <button onclick="buatAcuan()" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Buat Acuan</button>
      <button onclick="resetForm()" class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">Reset</button>
    </div>

    <label class="inline-flex items-center gap-2 mb-6">
      <input type="checkbox" id="toggleSlide" class="accent-blue-600" onchange="buatAcuan()">
      Tampilkan Slide 1 dan Slide 2
    </label>

    <div id="output" class="mt-6 space-y-6"></div>
  </div>

<!-- Modal Alert -->
<div id="customAlert" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden z-50">
  <div id="alertBox" class="bg-white p-6 rounded-xl shadow-lg max-w-md w-full modal-enter">
    <h2 class="text-lg font-bold text-red-600 mb-2">PERINGATAN!</h2>
    <p id="alertMessage" class="text-gray-700 mb-4"></p>
    <div class="text-right">
      <button onclick="tutupAlert()" class="px-4 py-2 bg-blue-600 text-white rounded">Oke</button>
    </div>
  </div>
</div>

  <script>
  window.onload = function () {
    const modal = document.getElementById("customAlert");
    const alertBox = document.getElementById("alertBox");

    function showAlert(pesan) {
      document.getElementById("alertMessage").textContent = pesan;
      modal.classList.remove("hidden");
      requestAnimationFrame(() => {
        alertBox.classList.add("modal-show");
      });
    }

    function tutupAlert() {
      alertBox.classList.remove("modal-show");
      alertBox.classList.add("modal-hide");

      setTimeout(() => {
        modal.classList.add("hidden");
        alertBox.classList.remove("modal-hide");
      }, 300);
    }

    function buatMatrix(list, baris, kolom, posisi, balikKolom = false) {
      const matrix = Array.from({ length: baris }, () => Array(kolom).fill(""));

      for (let r = 0; r < baris; r++) {
        for (let c = 0; c < kolom; c++) {
          let index;
          if (posisi === "Portrait") {
            index = balikKolom ? ((kolom - 1 - c) * baris + r) : (c * baris + r);
          } else {
            index = balikKolom ? (r * kolom + (kolom - 1 - c)) : (r * kolom + c);
          }
          if (index < list.length) {
            matrix[r][c] = list[index];
          }
        }
      }

      return { matrix };
    }

    function buatAcuan() {
      const isiHalaman = parseInt(document.getElementById("isiHalaman").value);
      const posisi = document.getElementById("posisi").value;
      const baris = parseInt(document.getElementById("baris").value);
      const kolom = parseInt(document.getElementById("kolom").value);
      const slide = document.getElementById("slide").value;
      const showSlide = document.getElementById("toggleSlide").checked;

      let totalHalaman = (slide === "2 Sisi") ? isiHalaman * 2 : isiHalaman;
      let angkaList = Array.from({length: totalHalaman}, (_, i) => i + 1);
      let output = document.getElementById("output");
      output.innerHTML = "";

      let hasilGabung = [];

      if (!isiHalaman || !posisi || !baris || !kolom || !slide) {
        showAlert("Mohon lengkapi semua input shuffle pages!");
        return;
      }

      if (slide === "1 Sisi") {
        const { matrix } = buatMatrix(angkaList, baris, kolom, posisi);
        if (showSlide) output.appendChild(buatTabel(matrix, "Slide 1"));
        matrix.forEach(row => hasilGabung.push(...row));
      } else {
        const ganjilList = angkaList.filter(n => n % 2 === 1);
        const genapList = angkaList.filter(n => n % 2 === 0);

        const { matrix: matrix1 } = buatMatrix(ganjilList, baris, kolom, posisi);
        if (showSlide) output.appendChild(buatTabel(matrix1, "Slide 1 (Ganjil)"));
        matrix1.forEach(row => hasilGabung.push(...row));

        const { matrix: matrix2 } = buatMatrix(genapList, baris, kolom, posisi, true);
        if (showSlide) output.appendChild(buatTabel(matrix2, "Slide 2 (Genap - Kolom Dibalik)"));
        matrix2.forEach(row => hasilGabung.push(...row));
      }

      const hasilText = document.createElement("div");
      hasilText.className = "mt-6 p-4 bg-gray-50 border rounded flex justify-between items-start gap-4";
      hasilText.innerHTML = `
        <div>
          <strong>Gabungan Halaman:</strong><br>
          <span id="hasilText">${hasilGabung.join(" ")}</span>
        </div>
        <button onclick="copyHasil()" class="text-blue-600 hover:text-blue-800 text-sm">📋 Copy</button>
      `;
      output.appendChild(hasilText);
    }

    function buatTabel(matrix, title) {
      const wrapper = document.createElement("div");
      wrapper.innerHTML = `<strong>${title}:</strong>`;
      const table = document.createElement("table");
      table.className = "mt-2 w-full border text-center";

      matrix.forEach(row => {
        const tr = document.createElement("tr");
        row.forEach(cell => {
          const td = document.createElement("td");
          td.className = "border p-1";
          td.textContent = cell;
          tr.appendChild(td);
        });
        table.appendChild(tr);
      });

      wrapper.appendChild(table);
      return wrapper;
    }

    function copyHasil() {
      const text = document.getElementById("hasilText").textContent;
      navigator.clipboard.writeText(text).then(() => {
        alert("Hasil gabungan berhasil disalin!");
      });
    }

    function resetForm() {
      document.getElementById("isiHalaman").value = "";
      document.getElementById("posisi").value = "-- Auto --";
      document.getElementById("baris").value = "";
      document.getElementById("kolom").value = "";
      document.getElementById("slide").value = "-- Sided --";
      document.getElementById("toggleSlide").checked = false;
      document.getElementById("output").innerHTML = "";
    }
    document.addEventListener('keydown', function (e) {
      if (!modal.classList.contains('hidden') && e.key === 'Enter') {
        tutupAlert();
      }
    });

    // Buat bisa dipanggil onclick
    window.buatAcuan = buatAcuan;
    window.resetForm = resetForm;
    window.tutupAlert = tutupAlert;
  };
  </script>
</body>
</html>