<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Penawaran Harga</title>
  <!-- TailwindCSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="style.css" />
  <style>
    body, #previewPenawaran {
      background: #f3f4f6 !important;
    }
    @media print {
      body, #previewPenawaran {
        background: #fff !important;
      }
    }
  </style>
</head>
<body class="bg-gray-100 text-gray-800">
  <div class="flex h-screen sidebar-print-hide">
    <!-- Sidebar -->
    <aside class="w-64 bg-gray-800 text-white flex flex-col sidebar-print-hide">
      <div class="p-4 text-xl font-bold border-b border-gray-700">Estimasi Online</div>
      <nav class="flex-1 p-4 space-y-2 text-sm">
        <a href="/estimasi-layout/index.html" class="block p-2 font-semibold rounded hover:bg-gray-700 ">🏠 Halaman Utama</a>
        <a href="/estimasi-layout/harga-potong.html" class="block p-2 font-semibold rounded hover:bg-gray-700 ">💰 Harga Potong (A3+)</a>
        <a href="/estimasi-layout/layout-a3.html" class="block p-2 font-semibold rounded hover:bg-gray-700 ">📐 Layout A3+</a>
        <a href="/estimasi-layout/buku/buku.html" class="block p-2 font-semibold rounded hover:bg-gray-700 ">📘 Buku</a>
        <a href="/estimasi-layout/spanduk.html" class="block p-2 font-semibold rounded hover:bg-gray-700 ">🖼️ Spanduk</a>
        <a href="/estimasi-layout/adjust-size.html" class="block p-2 font-semibold rounded hover:bg-gray-700 ">🔧 Adjust Size</a>
        <a href="/estimasi-layout/shuffle.html" class="block p-2 font-semibold rounded hover:bg-gray-700 ">📄 Shuffle Pages</a>
        <a href="/estimasi-layout/penawaran.html" class="block p-2 font-semibold rounded hover:bg-gray-700 bg-gray-900">💰 Penawaran</a>
        <a href="/estimasi-layout/pengiriman.html" class="block p-2 font-semibold rounded hover:bg-gray-700 ">🚚 Pengiriman</a>
      </nav>
    </aside>
    <!-- Main content -->
    <main class="flex-1 p-6 overflow-y-auto sidebar-print-hide">
      <h1 class="text-2xl font-bold mb-4 text-blue-700">Penawaran Harga</h1>
      <p class="text-sm text-gray-600 mb-4">Buat dokumen penawaran harga otomatis dan cepat</p>
      <div class="bg-white rounded-xl shadow p-6 max-w-4xl mx-auto">
        <!-- ==== FORM PENAWARAN ==== -->
        <form id="formPenawaran" autocomplete="off" class="space-y-6">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label for="pengirim" class="font-semibold block mb-1">Nama Pengirim:</label>
              <input type="text" name="pengirim" id="pengirim" required placeholder="Contoh: Windi" class="w-full border rounded p-2"/>
            </div>
            <div>
              <label for="tanggal" class="font-semibold block mb-1">Tanggal Penawaran:</label>
              <input type="date" name="tanggal" id="tanggal" required class="w-full border rounded p-2"/>
            </div>
            <div>
              <label for="customer" class="font-semibold block mb-1">Nama Customer:</label>
              <textarea name="customer" id="customer" required class="w-full border rounded p-2 min-h-[40px]"></textarea>
            </div>
            <div>
              <label for="alamat" class="font-semibold block mb-1">Alamat:</label>
              <textarea name="alamat" id="alamat" required class="w-full border rounded p-2 min-h-[40px]"></textarea>
            </div>
            <div>
              <label for="ppn-option" class="font-semibold block mb-1">Pilih PPN:</label>
              <select id="ppn-option" name="ppn-option" class="w-full border rounded p-2">
                <option value="non" selected>Non-PPN</option>
                <option value="ppn">PPN 11%</option>
              </select>
            </div>
          </div>
          <h3 class="font-bold mt-4 mb-2">Daftar Produk/Jasa</h3>
          <div class="overflow-x-auto">
            <table id="tabelProduk" class="min-w-full border text-sm">
              <thead class="bg-gray-100">
                <tr>
                  <th class="px-2 py-1 border text-center">No</th>
                  <th class="px-2 py-1 border text-left">Nama Produk/Jasa</th>
                  <th class="px-2 py-1 border text-center">Jumlah</th>
                  <th class="px-2 py-1 border text-right">Harga Satuan</th>
                  <th class="px-2 py-1 border text-right">Subtotal</th>
                  <th class="px-2 py-1 border text-center">Aksi</th>
                </tr>
              </thead>
              <tbody id="produkBody">
                <tr>
                  <td class="row-no border text-center">1</td>
                  <td class="border">
                    <textarea name="produk[]" required class="w-full border rounded p-1"></textarea>
                  </td>
                  <td class="border text-center">
                    <input type="number" name="jumlah[]" min="1" value="1" required class="w-16 border rounded p-1 text-center" />
                  </td>
                  <td class="border text-right">
                    <div class="flex items-center">
                      <span class="mr-1">Rp</span>
                      <input type="text" name="harga[]" value="0" required class="w-24 border rounded p-1 text-right" oninput="formatInputRupiah(this)" />
                    </div>
                  </td>
                  <td class="subtotal border text-right">
                    <span>Rp</span>
                    <span class="rp-nominal">0</span>
                  </td>
                  <td class="border text-center">
                    <button type="button" onclick="hapusBaris(this)" class="bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded text-xs">Hapus</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <button type="button" onclick="tambahBaris()" class="mt-2 bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm">Tambah Produk</button>
          <div class="text-right mt-4 space-y-1">
            <div id="formSubtotal">
              <strong>Subtotal: <span id="subtotalHarga" class="bold-nominal">Rp 0</span></strong>
            </div>
            <div id="formPPNRow" style="display: none;">
              <strong>PPN 11%: <span id="ppnHarga" class="bold-nominal">Rp 0</span></strong>
            </div>
            <div>
              <strong>Total: <span id="totalHarga" class="bold-nominal">Rp 0</span></strong>
            </div>
          </div>
          <div>
            <label for="catatan" class="font-semibold block mb-1">Catatan:</label>
            <textarea name="catatan" id="catatan" class="w-full border rounded p-2" placeholder="Contoh: Dp minimal 50% dari total transaksi&#10;Proses pengerjaan 2 hari setelah dp diterima"></textarea>
          </div>
          <input type="submit" value="Buat Penawaran" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded cursor-pointer"/>
        </form>
      </div>
    </main>
  </div>
  <!-- ==== PREVIEW PENAWARAN ==== -->
  <div
    id="previewPenawaran"
    style="display:none;"
    class="preview min-h-screen flex flex-col items-center justify-start bg-gray-100 py-8 px-2 print:py-0 print:px-0"
  >
    <div class="bg-white rounded-2xl shadow-lg p-8 max-w-2xl w-full mx-auto my-8 print:rounded-none print:shadow-none print:p-0 print:m-0 print:max-w-full print:w-[760px]">
      <div class="header-row flex items-start justify-between mb-2">
        <img src="img/logo-anugerah.png" class="logo w-40 h-auto" alt="Logo Anugerah Printshop" />
        <div class="company-info text-right">
          Jl. Ir. Juanda No. 12C Ciputat Timur, Tangerang Selatan, Banten<br>
          Telp. (021) 742 1799<br>
          WhatsApp. 0821 2245 0210 / 0812 9550 1651<br>
          Email. apsciputat@gmail.com<br>
          www.anugerahprint.com
        </div>
      </div>
      <hr>
      <div class="surat-meta flex justify-between mt-2">
        <div>No: <span id="pv-noSurat">003/AMK/V/2025</span></div>
        <div>Jakarta, <span id="pv-tanggal"></span></div>
      </div>
      <div class="kepada mt-2">
        <span class="kepada-yth font-semibold">Kepada Yth.</span>
        <span class="pv-customer block font-semibold" id="pv-customer"></span>
        <span class="pv-alamat block" id="pv-alamat"></span>
      </div>
      <div class="isi-surat mt-3 text-sm">
        <p>
          Dengan hormat,<br>
          Terima kasih atas kesempatan yang diberikan kepada <strong>ANUGERAH PRINTSHOP</strong> penyedia jasa
          layanan Copy dan Digital Printing. Prioritas tertinggi kami adalah memberikan layanan yang
          terbaik dan menjadi mitra terpercaya bagi pelanggan.<br>
        <br>
          Berikut kami sampaikan penawaran sebagai berikut :
        </p>
      </div>
      <div class="overflow-x-auto mt-3">
        <table class="preview-table min-w-full border text-sm">
          <thead class="bg-gray-100">
            <tr>
              <th class="td-center px-2 py-1 border text-center">No</th>
              <th class="td-left px-2 py-1 border text-left">Deskripsi </th>
              <th class="td-center px-2 py-1 border text-center">Jumlah</th>
              <th class="td-left px-2 py-1 border text-right">Harga Satuan</th>
              <th class="td-left px-2 py-1 border text-right">Subtotal</th>
            </tr>
          </thead>
          <tbody id="pv-produkBody">
            <!-- Produk Preview -->
          </tbody>
          <tbody id="pv-totalBody">
            <tr id="pv-subtotalRow">
              <td colspan="4" class="total-label border font-semibold text-right pr-4">Subtotal</td>
              <td class="total-cell border font-semibold text-right" id="pv-subtotalHarga"></td>
            </tr>
            <tr id="pv-ppnRow" style="display: none;">
              <td colspan="4" class="total-label border font-semibold text-right pr-4">PPN 11%</td>
              <td class="total-cell border font-semibold text-right" id="pv-ppnHarga"></td>
            </tr>
            <tr class="tr-total">
              <td colspan="4" class="total-label border font-bold text-right pr-4">Total</td>
              <td class="total-cell border font-bold text-right" id="pv-totalHarga"></td>
            </tr>
          </tbody>

        </table>
      </div>
      <div class="catatan mt-3 text-sm" id="catatanPreview">
        <div class="catatan-form" id="pv-catatan" style="display:none"></div>
        <span class="note-label block font-semibold mt-2">Pembayaran melalui rekening berikut:</span>
        <ul class="list-disc ml-6">
          <li>547-1077888 BCA a/n Anugerah Karya Grafistama</li>
          <li>166-00-0301757-1 MANDIRI a/n Anugerah Lestari Grafistama</li>
        </ul>
        <p class="mt-2">
          Untuk informasi lebih lanjut dapat menghubungi <strong>0821-2245-0210 <span id="pv-pengirim-inline"></span></strong><br>
          Demikian penawaran ini kami sampaikan atas perhatian dan kerjasamanya kami ucapkan terima kasih.
        </p>
      </div>
      <div class="penutup mt-6">
        <strong>Hormat Saya,</strong>
        <div style="margin-top:20px;">
          <img src="img/logo-alg.png" class="logo-small w-32 h-auto" alt="ALG" />
          <span id="pv-pengirim" class="block mt-1">windi</span>
        </div>
      </div>
      <div class="footer-cabang mt-8">
        <hr>
        Branch:<br>
        Jl. Margonda No. 514F, Pondok Cina, Kecamatan Beji, Kota Depok, Jawa Barat 16424<br>
        Jl. Poltangan Raya No.17, RT.1/RW.11, Pejaten Timur, Ps. Minggu, Kota Jakarta Selatan, Daerah Khusus Ibukota Jakarta 12510
      </div>
    </div>
    <div class="preview-buttons flex gap-2 mt-4 print:hidden">
      <button type="button" onclick="editPenawaran()" class="bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded">Edit Data</button>
      <button type="button" id="btnPrint" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded">Print</button>
    </div>
  </div>
  <script src="script.js"></script>
</body>
</html>
